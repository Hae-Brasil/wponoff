#!/usr/bin/env bash
# Autor: Matheus Santana
# DescriÃ§Ã£o: Simples ferramenta para identificaÃ§Ã£o de site em WordPress.
print_banner(){
    clear; echo -e """â•¦ â•¦â”Œâ”€â”â”Œâ”€â”â”Œâ”â”Œâ”Œâ”€â”â”Œâ”€â”â”Œâ”€â”
â•‘â•‘â•‘â”œâ”€â”˜â”‚ â”‚â”‚â”‚â”‚â”‚ â”‚â”œâ”¤ â”œâ”¤ 
â•šâ•©â•â”´  â””â”€â”˜â”˜â””â”˜â””â”€â”˜â””  â””"""
}

[[ $2 == "" ]] && echo -e "Utilize o parametro -u ou --url em seguida adicione o endereÃ§o do site.\nEx:\n\t./wponoff --url https://www.google.com" && exit
status_code=$(curl -s --head $2 | head -n1 | cut -d" " -f2)
source_code=`curl -s $2` >> /dev/null
response=$(echo $source_code | grep -Fo "wp-includes" | head -n1)
[[ $status_code != 200 ]] && echo -e "Ops... Url invÃ¡lida!" && exit
url=$2; ip=$(ping -c1 ${url#https://} | grep -Eo "[0-9]+\.[0-9]+\.[0-9]+\.[0-9]" | head -n1)

case $1 in 
    --url|-u) print_banner
    if [[ $response == "wp-content" ]] || [[ $response == "wp-includes" ]];then
        echo -e "â€¢ Wordpress: Yes ðŸ˜€\nâ€¢ Site: ${url#https://}\nâ€¢ IP: $ip"
    else
        echo -e "â€¢ Wordpress: No ðŸ™‚\nâ€¢ Site: ${url#https://}\nâ€¢ IP: $ip"
    fi;;
esac
